<div class="content--element ">
    <!-- Übersetzungen für Template bereitstellen -->
    <script>
        window.CaeliAreaCheckTranslations = {{ translations|json_encode|raw }};
    </script>
    <div class="mod_caeli_area_check container-wide">


        {#
        <details>
        <summary>Rohdaten anzeigen</summary>
        <pre>{{ rating|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    </details>
        #}


        {% if rating %}
            {% set isSuitable = isSuccess and
                (rating.rating_cutdensity is defined and rating.rating_cutdensity in ['green', 'yellow']) and
                (rating.rating_restrictions is defined and rating.rating_restrictions in ['green', 'yellow']) and
                (rating.rating_grid_connection is defined and rating.rating_grid_connection in ['green', 'yellow']) %}

            {% if isSuitable %}
                {{ insert_tag('insert_node::20')|raw }}

                <div class="row">
                    <div class="col-md-7">
                        <div class="ce--headline hl-h2 mb-0" data-animation="animate__fadeIn">
                            <h2>
                                <b class="d-block">{{ translations.result.success.title_bold }}</b>
                                {{ translations.result.success.title_text }}
                            </h2>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="row">
                    <div class="col-md-7">
                        <div class="ce--headline hl-h2 mb-0" data-animation="animate__fadeIn">
                            <h2>
                                <b>{{ translations.result.unsuitable.title_bold }}</b><br>
                                {{ translations.result.unsuitable.title_text }}
                            </h2>
                        </div>
                    </div>
                </div>
            {% endif %}

            <div class="content--element my-gap">
                <div class="row align-items-center">
                    <div class="col-md-5">
                        <div class="result-container pe-lg-5">
                            <ul class="list-check">
                                <li data-animation="animate__fadeInUp"{% if (rating.rating_cutdensity is not defined) or (rating.rating_cutdensity == 'red') %} class="is-invalid is-danger"{% elseif rating.rating_cutdensity == 'yellow' %} class="is-invalid is-warning"{% endif %}>
                                    <b class="h3 mb-2 fw-normal">{{ translations.result.criteria.wind_conditions.title }}</b>
                                    <span>{{ translations.result.criteria.wind_conditions.description }}</span>

                                    {#
                                    {% if rating.rating_cutdensity is defined %}
                                     <span class="rating-{{ rating.rating_cutdensity }}">
                                         {% if rating.rating_cutdensity == 'green' %}
                                             ✓ {{ translations.result.criteria.wind_conditions.rating.green }}
                                         {% elseif rating.rating_cutdensity == 'yellow' %}
                                             ⚠ {{ translations.result.criteria.wind_conditions.rating.yellow }}
                                         {% else %}
                                             ✗ {{ translations.result.criteria.wind_conditions.rating.red }}
                                         {% endif %}
                                     </span>
                                 {% else %}
                                     <span class="rating-red">✗ {{ translations.result.criteria.wind_conditions.rating.red }}</span>
                                 {% endif %}
                                    #}

                                </li>

                                <li data-animation="animate__fadeInUp"{% if (rating.rating_restrictions is not defined) or (rating.rating_restrictions == 'red') %} class="my-3 is-invalid is-danger"{% elseif rating.rating_restrictions == 'yellow' %} class="my-3 is-invalid is-warning"{% else %} class="my-3"{% endif %}>
                                    <b class="h3 mb-2 fw-normal">{{ translations.result.criteria.restrictions.title }}</b>
                                    <span>{{ translations.result.criteria.restrictions.description }}</span>
                                    {#
                                    {% if rating.rating_restrictions is defined %}
                                     <span class="rating-{{ rating.rating_restrictions }}">
                                         {% if rating.rating_restrictions == 'green' %}
                                             ✓ {{ translations.result.criteria.restrictions.rating.green }}
                                         {% elseif rating.rating_restrictions == 'yellow' %}
                                             ⚠ {{ translations.result.criteria.restrictions.rating.yellow }}
                                         {% else %}
                                             ✗ {{ translations.result.criteria.restrictions.rating.red }}
                                         {% endif %}
                                     </span>
                                 {% else %}
                                    <span class="rating-red">✗ {{ translations.result.criteria.restrictions.rating.red }}</span>
                                    {% endif %}
                                    #}

                                </li>

                                <li data-animation="animate__fadeInUp"{% if (rating.rating_grid_connection is not defined) or (rating.rating_grid_connection == 'red') %} class="is-invalid is-danger"{% elseif rating.rating_grid_connection == 'yellow' %} class="is-invalid is-warning"{% endif %}>
                                    <b class="h3 mb-2 fw-normal">{{ translations.result.criteria.grid_connection.title }}</b>
                                    <span>{{ translations.result.criteria.grid_connection.description }}</span>

                                    {#
                                    {% if rating.rating_grid_connection is defined %}
                                   <span class="rating-{{ rating.rating_grid_connection }}">
                                       {% if rating.rating_grid_connection == 'green' %}
                                           ✓ {{ translations.result.criteria.grid_connection.rating.green }}
                                       {% elseif rating.rating_grid_connection == 'yellow' %}
                                           ⚠ {{ translations.result.criteria.grid_connection.rating.yellow }}
                                       {% else %}
                                           ✗ {{ translations.result.criteria.grid_connection.rating.red }}
                                       {% endif %}
                                   </span>
                               {% else %}
                                   <span class="rating-red">✗ {{ translations.result.criteria.grid_connection.rating.red }}</span>
                               {% endif %}
                                    #}

                                </li>
                            </ul>

                            {% if not isSuitable %}
                                {#
                                <div class="alert alert-warning mt-4">
                           <h5>{{ translations.result.conclusion.title }}</h5>
                           <p>{{ translations.result.conclusion.unsuitable_text }}
                               {% if isSuccess and rating.rating_cutdensity is defined and rating.rating_cutdensity in ['green', 'yellow'] %}
                                   {{ translations.result.conclusion.good_wind_text }}
                               {% endif %}
                               {{ translations.result.conclusion.contact_text }}</p>
                       </div>
                                #}

                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-7 mt-4 mt-md-0">
                        <div class="form-container p-5 bg-secondary">
                            <div class="mb-3">
                                <div class="row">
                                    <div class="col-md-8" data-animation="animate__fadeIn">

                                            {% if isSuitable %}   <h3 class="mb-0">
                                                {{ translations.result.form_section.suitable_title }} </h3>
                                            {% else %} <h3 class="fw-normal mb-0">
                                                {{ translations.result.form_section.unsuitable_title }}</h3>
                                            {% endif %}

                                    </div>
                                    <div class="col-md-4" data-animation="animate__fadeInDown">
                                        {% if isSuitable %}
                                            <img class="pdf-preview" src="/files/base/layout/img/flaechencheck-pdf-badge-de.png">
                                        {% else %}
                                              <img class="pdf-preview is-badge" src="/files/base/layout/img/caeli_de/badges/flaechencheck-pdf-badge-de_negativ.svg">
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <div data-animation="animate__fadeIn">
                                {% if app.request.locale == 'en' %}
                                    {% if isSuitable %}
                                        {{ "{{insert_form::11}}"|insert_tag|raw }}
                                    {% else %}
                                        {{ "{{insert_form::13}}"|insert_tag|raw }}
                                    {% endif %}
                                {% else %}
                                    {% if isSuitable %}
                                        {{ "{{insert_form::10}}"|insert_tag|raw }}
                                    {% else %}
                                        {{ "{{insert_form::12}}"|insert_tag|raw }}
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {% elseif checkid %}
            <div class="alert alert-danger">
                <h4>{{ translations.result.error_states.check_failed.title }}</h4>
                {% if error %}
                    <p>{{ error }}</p>
                {% else %}
                    <p>{{ translations.result.error_states.not_found.message }}</p>
                {% endif %}
                {% if mapPage %}
                    <div class="mt-3">
                        <a href="{{ mapPage.getFrontendUrl() }}" class="btn btn-primary">{{ translations.result.error_states.check_failed.button }}</a>
                    </div>
                {% else %}
                    <div class="mt-3">
                        <a href="/flaechencheck" class="btn btn-primary">{{ translations.result.error_states.check_failed.button }}</a>
                    </div>
                {% endif %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <h4>{{ translations.result.error_states.welcome.title }}</h4>
                <p>{{ translations.result.error_states.welcome.message }}</p>
                <div class="text-center">
                    {% if mapPage %}
                        <a href="{{ mapPage.getFrontendUrl() }}" class="btn btn-primary">{{ translations.result.error_states.welcome.button }}</a>
                    {% else %}
                        <a href="/flaechencheck" class="btn btn-primary">{{ translations.result.error_states.welcome.button }}</a>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    </div>
</div>


<style>

    .pdf-preview {
        max-width: 230px;
        margin: 1rem auto 0 auto;

        @media (min-width: 768px) {
            margin-top: -90%;
        }
    }

    .pdf-preview.is-badge{
         @media (min-width: 768px) {
            margin-top: -50%;
        }
    }


    {#
   span[class*="rating-"] {
       display: block;
   }

    .rating-green {
       color: var(--bs-success);
   }

   .rating-yellow {
       color: var(--bs-warning);
   }

   .rating-red {
       color: var(--bs-danger);
   }
    #}

</style> 