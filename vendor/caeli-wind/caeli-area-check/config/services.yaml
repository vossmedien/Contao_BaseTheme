services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    # Registriere alle Dienste aus dem Bundle
    CaeliWind\CaeliAreaCheckBundle\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Resources/'
            - '../src/Tests/'

    # FrontendModule Controller
    CaeliWind\CaeliAreaCheckBundle\Controller\FrontendModule\AreaCheckMapController:
        arguments:
            $framework: '@contao.framework'
            $logger: '@monolog.logger.contao'

    CaeliWind\CaeliAreaCheckBundle\Controller\FrontendModule\AreaCheckResultController:
        arguments:
            $framework: '@contao.framework'
            $logger: '@monolog.logger.contao'

    # FormDataListener f√ºr Formular-Hooks
    CaeliWind\CaeliAreaCheckBundle\EventListener\FormDataListener:
        arguments:
            - '@monolog.logger.contao'
            - '%caeli_area_check.form_ids%'
            - '%caeli_area_check.field_mapping%'
        tags:
            - { name: contao.hook, hook: processFormData, method: onProcessFormData }
            - { name: contao.hook, hook: loadFormField, method: onLoadFormField }

    CaeliWind\CaeliAreaCheckBundle\Controller\:
        resource: '../src/Controller/'
        tags: ['controller.service_arguments']

    CaeliWind\CaeliAreaCheckBundle\EventListener\:
        resource: '../src/EventListener/'

    # Map Image Generator Service
    CaeliWind\CaeliAreaCheckBundle\Service\MapImageGeneratorService:
        arguments:
            $logger: '@logger'
            $projectDir: '%kernel.project_dir%'
        tags:
            - { name: 'monolog.logger', channel: 'caeli_area_check' } 