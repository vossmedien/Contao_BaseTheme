{% extends "mod_auction_detail.html.twig" %}

{% block content %}
    {# Debug-Informationen #}
    <div class="auction-debug" style="background: #eee; padding: 10px; margin-bottom: 20px; font-family: monospace;">
        <h3>Debug Info</h3>
        <p>Template wurde aufgerufen!</p>
        {% if debug is defined %}
            <h4>Debug-Variablen:</h4>
            <ul>
                <li>auto_item: {{ debug.auto_item }}</li>
                <li>auction_id: {{ debug.auction_id }}</li>
                <li>request_uri: {{ debug.request_uri }}</li>
                <li>extracted_id: {{ debug.extracted_id }}</li>
            </ul>
        {% endif %}
        
        {% if auction is defined %}
            <h4>Auktions-Informationen:</h4>
            <ul>
                <li>Auktion gefunden: Ja</li>
                <li>ID: {{ auction.id|default('nicht verfügbar') }}</li>
                <li>Titel: {{ auction.title|default('nicht verfügbar') }}</li>
                <li>Verfügbare Felder: {{ auction|keys|join(', ') }}</li>
            </ul>
        {% else %}
            <p><strong>Keine Auktion gefunden!</strong></p>
        {% endif %}
    </div>

    <div class="auction-detail">
        {% if auction %}
            <article class="auction-item">
                <div class="auction-header">
                    <h1 class="auction-title">{{ auction.title|default(auction.auction_id) }}</h1>
                    <span class="auction-status">{{ auction.status|default('') }}</span>
                </div>
                
                <div class="auction-content">
                    <div class="auction-details">
                        {% if auction.bundesland|default %}
                            <div class="detail-item">
                                <strong>{{ 'Bundesland'|trans }}:</strong> {{ auction.bundesland }}
                            </div>
                        {% endif %}
                        
                        {% if auction.landkreis|default %}
                            <div class="detail-item">
                                <strong>{{ 'Landkreis'|trans }}:</strong> {{ auction.landkreis }}
                            </div>
                        {% endif %}
                        
                        {% if auction.ort|default %}
                            <div class="detail-item">
                                <strong>{{ 'Ort'|trans }}:</strong> {{ auction.ort }}
                            </div>
                        {% endif %}
                        
                        {% if auction.flaeche_ha|default %}
                            <div class="detail-item">
                                <strong>{{ 'Fläche'|trans }}:</strong> {{ auction.flaeche_ha }} ha
                            </div>
                        {% endif %}
                        
                        {% if auction.leistung_mw|default %}
                            <div class="detail-item">
                                <strong>{{ 'Leistung'|trans }}:</strong> {{ auction.leistung_mw }} MW
                            </div>
                        {% endif %}
                        
                        {% if auction.anzahl_wea|default %}
                            <div class="detail-item">
                                <strong>{{ 'Anzahl WEA'|trans }}:</strong> {{ auction.anzahl_wea }}
                            </div>
                        {% endif %}
                        
                        {% if auction.wea_typ|default %}
                            <div class="detail-item">
                                <strong>{{ 'WEA Typ'|trans }}:</strong> {{ auction.wea_typ }}
                            </div>
                        {% endif %}
                        
                        {% if auction.start_date|default %}
                            <div class="detail-item">
                                <strong>{{ 'Startdatum'|trans }}:</strong> {{ auction.start_date|date('d.m.Y') }}
                            </div>
                        {% endif %}
                        
                        {% if auction.end_date|default %}
                            <div class="detail-item">
                                <strong>{{ 'Enddatum'|trans }}:</strong> {{ auction.end_date|date('d.m.Y') }}
                            </div>
                        {% endif %}
                    </div>
                    
                    {% if auction.description|default %}
                        <div class="auction-description">
                            <h2>{{ 'Beschreibung'|trans }}</h2>
                            {{ auction.description|raw }}
                        </div>
                    {% endif %}
                    
                    {% if auction.documents|default and auction.documents|length > 0 %}
                        <div class="auction-documents">
                            <h2>{{ 'Dokumente'|trans }}</h2>
                            <ul>
                                {% for document in auction.documents %}
                                    <li>
                                        <a href="{{ document.url }}" target="_blank" rel="noopener noreferrer">
                                            {{ document.name|default('Dokument ' ~ loop.index) }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                </div>
                
                <div class="auction-footer">
                    <a href="{{ listingPage ? listingPage.getFrontendUrl() : '#' }}" class="back-to-list">
                        {{ 'Zurück zur Übersicht'|trans }}
                    </a>
                    
                    {% if auction.contact_email|default or auction.contact_phone|default %}
                        <div class="auction-contact">
                            <h3>{{ 'Kontakt'|trans }}</h3>
                            {% if auction.contact_email|default %}
                                <div class="contact-item">
                                    <strong>{{ 'E-Mail'|trans }}:</strong>
                                    <a href="mailto:{{ auction.contact_email }}">{{ auction.contact_email }}</a>
                                </div>
                            {% endif %}
                            
                            {% if auction.contact_phone|default %}
                                <div class="contact-item">
                                    <strong>{{ 'Telefon'|trans }}:</strong>
                                    <a href="tel:{{ auction.contact_phone }}">{{ auction.contact_phone }}</a>
                                </div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </article>
        {% else %}
            <div class="no-auction">
                <p>{{ 'Auktion nicht gefunden'|trans }}</p>
            </div>
        {% endif %}
    </div>
{% endblock %} 