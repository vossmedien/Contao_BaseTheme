{# Twig Template f端r das Auction Listing Modul #}
<div class="container">
    <div class="auction-listing">
        {% if auctions|default and auctions|length > 0 %}
            {# Filter-Formular - wurde in ein separates Modul ausgelagert #}

            {# Auktionsliste #}
            <div class="auction-items row row-cols-1 row-cols-md-2 g-2">
                {% for auction in auctions %}
                    {% set raw_data = auction._raw_data|default(auction) %}
                    <div class="col">
                        <article class="auction-item card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title h5 mb-0">
                                  {{ 'Auktion'|trans }} #{{ raw_data.auctionId }}
                                </h3>
                            </div>


                            <div class="card-body">
                                <div class="auction-raw-data">
                                    <pre class="bg-light p-3 border rounded" style="max-height: 500px; overflow: auto;">
                            {{ raw_data|json_encode(constant('JSON_PRETTY_PRINT')) }}
                        </pre>
                                </div>
                            </div>


                            <div class="card-footer">
                                <a href="{{ detailPage ? detailPage.getFrontendUrl() ~ '/' ~ raw_data.auctionId : '#' }}" class="btn btn-primary">
                                    <i class="bi bi-eye"></i> {{ 'Details anzeigen'|trans }}
                                </a>
                            </div>
                        </article>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-auctions">
                <p>{{ 'Keine Auktionen gefunden'|trans }}</p>
            </div>
        {% endif %}
    </div>
</div>

{# CSS Styling f端r Fortschrittsanzeigen und Filter #}
<style>
    .auction-progress {
        margin-top: 15px;
    }

    .progress-items {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 5px;
    }

    .progress-item {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.85em;
    }

    .progress-item.OK {
        background-color: #d4edda;
        color: #155724;
    }

    .progress-item.REQUESTED {
        background-color: #fff3cd;
        color: #856404;
    }

    .progress-item.PENDING {
        background-color: #cce5ff;
        color: #004085;
    }

    /* Filter-Styling */
    .filter-container {
        margin-bottom: 30px;
        background: #f8f9fa;
        padding: 20px;
        border-radius: 5px;
    }

    .filter-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 15px;
        gap: 15px;
    }

    .filter-item {
        flex: 1;
        min-width: 200px;
    }

    .filter-item label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .filter-item select,
    .filter-item input {
        width: 100%;
        padding: 8px;
        border: 1px solid #ced4da;
        border-radius: 4px;
    }

    .filter-range .range-inputs {
        display: flex;
        align-items: center;
    }

    .filter-range .range-inputs input {
        width: calc(50% - 10px);
    }

    .filter-range .range-inputs span {
        margin: 0 10px;
    }

    .filter-actions {
        margin-top: 20px;
        justify-content: flex-start;
    }

    .filter-submit {
        padding: 8px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .filter-reset {
        padding: 8px 15px;
        background-color: #6c757d;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin-left: 10px;
    }

    .filter-refresh {
        padding: 8px 15px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px;
    }

    /* Verbesserte Dual-Range-Slider Styling */
    .dual-range-slider-container {
        position: relative;
        padding: 10px 0;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    .dual-range-slider {
        position: relative;
        width: 100%;
        height: 40px;
    }

    .slider-track {
        position: absolute;
        width: 100%;
        height: 5px;
        top: 18px;
        background: #ddd;
        border-radius: 2.5px;
        z-index: 1;
    }

    .slider-range {
        position: absolute;
        height: 5px;
        top: 18px;
        background: #3498db;
        border-radius: 2.5px;
        z-index: 2;
    }

    .dual-range-slider input[type="range"] {
        position: absolute;
        width: 100%;
        height: 5px;
        margin: 0;
        padding: 0;
        outline: none;
        -webkit-appearance: none;
        pointer-events: none;
        z-index: 3;
        opacity: 0;
    }

    .dual-range-slider .slider-thumb {
        position: absolute;
        width: 20px;
        height: 20px;
        background: #3498db;
        border-radius: 50%;
        top: 10px;
        z-index: 4;
        cursor: pointer;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    .dual-range-slider .slider-thumb.min {
        left: 0%;
        transform: translateX(-10px);
    }

    .dual-range-slider .slider-thumb.max {
        right: 0%;
        transform: translateX(10px);
    }

    .dual-range-slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: transparent;
        cursor: pointer;
        pointer-events: auto;
        z-index: 5;
    }

    .dual-range-slider input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: transparent;
        cursor: pointer;
        pointer-events: auto;
        z-index: 5;
    }

    .range-values {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
    }

    .range-values .min-value,
    .range-values .max-value {
        font-size: 14px;
        color: #666;
    }

    .range-current-values {
        text-align: center;
        margin-top: -5px;
        margin-bottom: 5px;
        font-weight: bold;
        color: #3498db;
    }
</style>

{# CSS f端r Loading-Overlay #}
<style>
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 1000;
    }

    .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 10px;
    }

    .loading-text {
        font-weight: bold;
        color: #333;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    /* Relative Position f端r das Overlay */
    .auction-listing {
        position: relative;
        min-height: 200px;
    }

    /* Dual-Range-Slider Styling */
    .dual-range-slider-container {
        position: relative;
        padding: 10px 0;
    }

    .dual-range-slider {
        position: relative;
        width: 100%;
        height: 20px;
    }

    .dual-range-slider input[type="range"] {
        position: absolute;
        width: 100%;
        height: 5px;
        margin: 0;
        padding: 0;
        outline: none;
        pointer-events: none;
        -webkit-appearance: none;
        z-index: 3;
        background: transparent;
    }

    .dual-range-slider input[type="range"]::-webkit-slider-thumb {
        position: relative;
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #3498db;
        cursor: pointer;
        pointer-events: auto;
        z-index: 4;
    }

    .dual-range-slider input[type="range"]::-moz-range-thumb {
        position: relative;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #3498db;
        cursor: pointer;
        pointer-events: auto;
        z-index: 4;
    }

    .slider-track {
        position: absolute;
        width: 100%;
        height: 5px;
        top: 7.5px;
        background: #ddd;
        z-index: 1;
        border-radius: 2.5px;
    }

    .dual-range-slider .min-range {
        z-index: 2;
    }
</style>
