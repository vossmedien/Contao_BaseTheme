{# Twig Template für das Auction Listing Modul #}
<div class="container">
    <div class="auction-listing">
        {% if auctions|default and auctions|length > 0 %}
            {# Filter-Formular - wurde in ein separates Modul ausgelagert #}

            {# Auktionsliste #}
            <div class="auction-items row row-cols-1 row-cols-md-2 g-2">
                {% for auction in auctions %}
                    {% set raw_data = auction._raw_data|default(auction) %}
                    <div class="col">
                        <article class="auction-item card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title h5 mb-0">
                                  {{ 'Auktion'|trans }} #{{ raw_data.auctionId }}
                                </h3>
                            </div>


                            <div class="card-body">
                                <div class="auction-raw-data">
                                    <pre class="bg-light p-3 border rounded" style="max-height: 500px; overflow: auto;">
                            {{ raw_data|json_encode(constant('JSON_PRETTY_PRINT')) }}
                        </pre>
                                </div>
                            </div>


                            <div class="card-footer">
                                <a href="{{ detailPage ? detailPage.getFrontendUrl() ~ '/' ~ raw_data.auctionId : '#' }}" class="btn btn-primary">
                                    <i class="bi bi-eye"></i> {{ 'Details anzeigen'|trans }}
                                </a>
                            </div>
                        </article>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-auctions">
                <p>{{ 'Keine Auktionen gefunden'|trans }}</p>
            </div>
        {% endif %}
    </div>
</div>

{# CSS für Loading-Overlay #}
<style>
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 1000;
    }

    .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 10px;
    }

    .loading-text {
        font-weight: bold;
        color: #333;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    /* Relative Position für das Overlay */
    .auction-listing {
        position: relative;
        min-height: 200px;
    }

</style>
