{# 1. Variable vorbereiten, die immer eine Liste ist #}
    {% set auctions_to_display = [] %}
    {% if auction is defined and auction %}
        {# Wenn nur eine einzelne Auktion übergeben wird (selten im CE, aber möglich) #}
        {% set auctions_to_display = [auction] %}
    {% elseif auctions is defined and auctions %}
        {% set auctions_to_display = auctions %}
    {% endif %}

<div class="auction-element-wrapper{% if class is defined and class %} {{ class }}{% endif %}{% if cssClass %} {{ cssClass }}{% endif %}">
    {# Headline ausgeben, falls vorhanden #}
    {% if headline and headline.value %}
        <div class="content--element ce_rsce_headline">
            <div class="ce--inner">
                <div>
                    <div data-animation="animate__fadeIn" class="headline-wrapper">
                        <div class="ce--headline hl-{{ headline.unit|default('h2') }}">
                            <{{ headline.unit|default('h2') }} style="">{{ headline.value }}</{{ headline.unit|default('h2') }}>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

    {% if auctions_to_display|length > 0 %}
        <div class="auction-card-grid">
      <div class="auction-items row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3">
        {% for auction_data_from_loop in auctions_to_display %}
            <div class="col">
            {% if auctionItemTemplate is defined and auctionItemTemplate %}
                {% include auctionItemTemplate with {
                    'auction': auction_data_from_loop,
                    'raw_data': auction_data_from_loop._raw_data,
                    'detailPageUrl': detailPageUrl,
                    'cssClass': cssClass
                } %}
            {% else %}
                <p class="alert alert-danger">Item-Template nicht definiert oder nicht gefunden.</p>
                {# Fallback: Rohdaten des gesamten Auktions-Objekts ausgeben, wenn kein Item-Template da ist #}
                <pre>{{ auction_data_from_loop|json_encode(constant('JSON_PRETTY_PRINT') b-or constant('JSON_UNESCAPED_UNICODE')) }}</pre>
            {% endif %}
            </div>{# Ende .col #}
        {% endfor %}
        </div>{# Ende .row #}
        </div>{# Ende .auction-card-grid #}
    {% endif %}
</div>
