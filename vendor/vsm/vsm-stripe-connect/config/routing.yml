vsm_stripe_connect:
    resource: "../config/routes.yaml"
    type: yaml

vsm_stripe_connect_webhook:
    resource: '../src/Controller/StripeWebhookController.php'
    type: attribute
    defaults:
        _format: json
        _token_check: false
    options:
        utf8: true

# Explizit den StripeCheckoutController laden
vsm_stripe_connect_checkout:
    resource: '../src/Controller/StripeCheckoutController.php'
    type: attribute
    defaults:
        _format: json
        _token_check: false
    options:
        utf8: true


# Download Route
download_file:
    path: /download/{token}/{fileId}
    controller: Vsm\VsmStripeConnect\Controller\DownloadController::download
    methods: [GET]
    requirements:
        token: '[a-zA-Z0-9]+'
        fileId: '[a-fA-F0-9-]+'

# Stripe Routes
stripe_check_user:
    path: /stripe/check-user
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::checkUser
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false

stripe_webhook:
    path: /stripe/webhook
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::handleWebhook
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false

stripe_create_payment_intent:
    path: /stripe/create-payment-intent
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::createPaymentIntent
    methods: [POST, OPTIONS]
    defaults:
        _scope: frontend
        _token_check: false

stripe_get_price:
    path: /stripe/get-price
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::getPrice
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false 