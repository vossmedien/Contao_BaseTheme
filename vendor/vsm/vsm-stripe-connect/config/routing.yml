vsm_stripe_connect:
    resource: "%kernel.project_dir%/vendor/vsm/vsm-stripe-connect/config/routes.yaml"
    type: yaml
    defaults:
        _scope: frontend

# Explizit die Controller laden
vsm_stripe_connect_webhook:
    resource: '%kernel.project_dir%/vendor/vsm/vsm-stripe-connect/src/Controller/StripeWebhookController.php'
    type: attribute
    defaults:
        _format: json
        _token_check: false
        _scope: frontend

# Explizit den StripeCheckoutController laden
vsm_stripe_connect_checkout:
    resource: '%kernel.project_dir%/vendor/vsm/vsm-stripe-connect/src/Controller/StripeCheckoutController.php'
    type: attribute
    defaults:
        _format: json
        _token_check: false
        _scope: frontend


# Download Route
download_file:
    path: /download/{token}/{fileId}
    controller: Vsm\VsmStripeConnect\Controller\DownloadController::download
    methods: [GET]
    requirements:
        token: '[a-zA-Z0-9]+'
        fileId: '[a-fA-F0-9-]+'

# Stripe Routes
stripe_check_user:
    path: /stripe/check-user
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::checkUser
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false

stripe_webhook:
    path: /stripe/webhook
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::handleWebhook
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false

stripe_create_payment_intent:
    path: /stripe/create-payment-intent
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::createPaymentIntent
    methods: [POST, OPTIONS]
    defaults:
        _scope: frontend
        _token_check: false

stripe_get_price:
    path: /stripe/get-price
    controller: Vsm\VsmStripeConnect\Controller\StripeWebhookController::getPrice
    methods: [POST]
    defaults:
        _scope: frontend
        _token_check: false 