(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){function e(e,t,s,n){const i=`__${t}_handler__`;e[i]&&e.removeEventListener(t,e[i],n),e.addEventListener(t,s,n),e[i]=s}function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;if("string"!=typeof e)return parseFloat(e)||0;const s=parseFloat(e);return isNaN(s)?0:e.endsWith("px")?s:e.endsWith("rem")?s*parseFloat(getComputedStyle(document.documentElement).fontSize):e.endsWith("em")?s*parseFloat(getComputedStyle(t).fontSize):e.endsWith("vh")?s*window.innerHeight/100:e.endsWith("vw")?s*window.innerWidth/100:s}class s{constructor(e){this.element=e,this.isExpanded=!1,this.isActive=!1,this.isInteracting=!1}expand(){this.isExpanded||(this.isExpanded=!0,this.element.classList.add("is-expanded"),function(e){const t=e.querySelector(".stoerer--content");if(!t)return;const s=t.style.transition;t.style.transition="none",t.style.maxWidth="max-content";const n=t.scrollWidth;t.style.maxWidth="",t.style.transition=s,requestAnimationFrame((()=>{t.style.setProperty("--stoerer-content-max-width",n+"px")}))}(this.element))}collapse(){this.isExpanded&&(this.isExpanded=!1,this.element.classList.remove("is-expanded"),function(e){const t=e.querySelector(".stoerer--content");t&&t.style.removeProperty("--stoerer-content-max-width")}(this.element))}activate(){this.isActive=!0,this.element.classList.add("is-active")}deactivate(){this.isActive=!1,this.element.classList.remove("is-active")}setInteracting(e){this.isInteracting=e,this.element.classList.toggle("is-interacting",e)}}const n=new Map;function i(e){return n.has(e)||n.set(e,new s(e)),n.get(e)}function r(){n.forEach((e=>{window.innerWidth<768&&(e.deactivate(),e.collapse())}))}function o(){const s=document.querySelectorAll(".ce--stoerer.is-expandable"),n=document.querySelectorAll(".content--element.ce_rsce_stoerer");s.forEach((t=>{const s=i(t),n=t.querySelector(".stoerer-trigger");n&&!n.dataset.listenerAttached&&(e(n,"click",(e=>{s.setInteracting(!0),s.isExpanded?(s.collapse(),s.deactivate()):(s.expand(),s.activate()),setTimeout((()=>s.setInteracting(!1)),50)})),n.dataset.listenerAttached="true"),t.dataset.hoverListenerAttached||(e(t,"mouseenter",(()=>{window.innerWidth<768||s.isInteracting||s.isActive||s.expand()})),e(t,"mouseleave",(()=>{window.innerWidth<768||s.isInteracting||s.isActive||s.collapse()})),t.dataset.hoverListenerAttached="true")})),document.querySelectorAll(".is-fixed.content--element.ce_rsce_stoerer").forEach((e=>{const s=Array.from(e.querySelectorAll(":scope > .ce--stoerer.is-expandable"));if(s.length<=1)return void s.forEach((e=>e.style.zIndex=""));const n=t((getComputedStyle(e).getPropertyValue("--stoerer-vertical-gap")||"0.75rem").trim(),e);s.sort(((e,s)=>{const n=e=>{if(!e.dataset.initialTopPx){const s=e.style.top||getComputedStyle(e).top;e.dataset.originalStyleTop=s,e.dataset.initialTopPx=t(s,e)}return parseFloat(e.dataset.initialTopPx)};return n(e)-n(s)}));let i="0px",r=0;s.forEach(((e,t)=>{if(e.style.zIndex=s.length-t,0===t){i=e.dataset.originalStyleTop||"0px",e.style.top=i;const t=e.querySelector(".stoerer-trigger");r=t?t.offsetHeight:0}else e.style.top=`calc(${i} + ${r}px + ${n}px)`}))})),document.querySelectorAll('.ce--stoerer[style*="left:"], .ce--stoerer[style*="right:"]').forEach((e=>{e.classList.remove("is-flush-left","is-flush-right");const t=e.getBoundingClientRect();t.left<=2?e.classList.add("is-flush-left"):t.right>=window.innerWidth-2&&e.classList.add("is-flush-right")})),n.forEach((e=>e.classList.add("js-stoerer-ready")))}let a;o(),window.addEventListener("resize",(()=>{clearTimeout(a),a=setTimeout(o,250)})),e(document,"click",(function(e){const t=e.target.closest(".ce--stoerer.is-expandable");n.forEach(((e,s)=>{s!==t&&e.isExpanded&&(e.collapse(),e.deactivate())})),window.innerWidth<768&&!t&&r()})),document.body.addEventListener("stoererAdded",(function(e){console.log("Event stoererAdded empfangen."),requestAnimationFrame((()=>{o()}))}))}))})();