// Map für feste Gap-Werte

@mixin responsive-font-size($heading) {
  $desktop-size: map-get(map-get($headings-font-sizes, $heading), 'desktop');
  $mobile-size: map-get(map-get($headings-font-sizes, $heading), 'mobile');

  font-size: $mobile-size;

  @include media-breakpoint-up(md) {
    font-size: $desktop-size;
  }
}



// Funktion zur Berechnung des Abstands basierend auf der Schriftgröße
@function calculate-headline-spacing($heading) {
  $desktop-size: map-get(map-get($headings-font-sizes, $heading), 'desktop');
  @return calc(#{$desktop-size} * 0.7);
}

// Globale Überschriften-Stile
@each $heading, $sizes in $headings-font-sizes {
  #{$heading}, .#{$heading} {
    &:not(:has([class*="h"])) {
      @include responsive-font-size($heading);
      line-height: $headings-line-height;
      font-weight: var(--bs-#{$heading}-font-weight, $headings-font-weight);

      &:not(.ce--headline *) {
        margin-bottom: calculate-headline-spacing($heading);
        display: block;
      }
    }
  }
}

// Angepasste Headline-Klassen
.ce--headline {
  display: flex;
  flex-flow: column nowrap;

  * {
    margin: 0 !important;
    max-width: 100%;
  }

  @each $heading in map-keys($headings-font-sizes) {
    &.hl-#{$heading} {
      gap: map-get($headline-gaps, $heading);
      margin-bottom: calculate-headline-spacing($heading);

      @if $heading != 'h6' {
        $next-heading: nth(map-keys($headings-font-sizes), index(map-keys($headings-font-sizes), $heading) + 1);
        .ce--topline,
        .ce--subline {
          @include responsive-font-size($next-heading);
        }
      } @else {
        .ce--topline,
        .ce--subline {
          font-size: $font-size-base;
        }
      }
    }
  }
}

// Zusätzliche Stile
.container .ce--headline > .container {
  margin: 0;
}

[class*="text-white"] .ce--headline {
  --#{$prefix}headline-color: var(--#{$prefix}white);
}

// Mixin für Headline-Gewichte
@mixin headline-weights {
  @for $i from 1 through 6 {
    h#{$i}, .h#{$i} {
      &:not(:has([class*="h"])) {
        font-weight: var(--bs-h#{$i}-font-weight, $headings-font-weight);
      }
    }
  }
}

// Anwendung des Mixins
@include headline-weights;

// Responsive Anpassungen
@include media-breakpoint-down(md) {
  .ce--headline {
    @each $heading in map-keys($headings-font-sizes) {
      &.hl-#{$heading} {
        gap: map-get($mobile-headline-gaps, $heading);
        margin-bottom: calc(#{calculate-headline-spacing($heading)} * 0.8);
      }
    }
  }
}

.ce--subline {
  color: var(--bs-subline-color);
  font-weight: var(--bs-subline-font-weight);
}

.ce--topline {
  color: var(--bs-topline-color);
  font-weight: var(--bs-topline-font-weight);
}